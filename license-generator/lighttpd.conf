var.log_root    = "/usr/local/var/log/lighttpd"
var.server_root = ".."
server.document-root = server_root
server.port = 8080
server.errorlog = log_root + "/error.log"

server.modules += ( "mod_fastcgi" )

fastcgi.debug = 1
fastcgi.server = (
    "/fulfillment" => ((
        "socket" => "./license-generator.fcgi.socket",
        "check-local" => "disable",
        "bin-path" => var.CWD + "/target/debug/license-generator",
        "max-procs" => 1
    )),
    "/license" => ((
        "socket" => "./license.fcgi.socket",
        "check-local" => "disable",
        "bin-path" => var.CWD + "/target/debug/license",
        "max-procs" => 1
    )),
    "/license/download" => ((
        "socket" => "./license-download.fcgi.socket",
        "check-local" => "disable",
        "bin-path" => var.CWD + "/target/debug/license",
        "max-procs" => 1
    ))
)

include "/usr/local/etc/lighttpd/conf.d/mime.conf"
